# MySQL

- 安装
- 数据库设计与 SQL
- 架构图（Server 层和存储引擎层）
  - Server 层组件及其各自作用、binlog 数据组织形式、读写分离实现及其原理
  - 存储引擎层的分类，MyISM 与 InnoDB 的区别（事务支持上、数据组织形式上）
- InnoDB 存储引擎
  - 内存部分
    - Buffer Pool （包括 change pool）
    - Log Buffer （undo log 和 redo log）
  - 磁盘部分
    - 行结构，行与行之间的组织形式
    - 页结构，页与页之间的组织形式
    - 表空间
    - 索引（分类、数据结构、失效原因、最佳实践）
  - 线程模型
  - 事务及其特性、并发一致性问题、隔离级别及其实现
    - 封锁协议
    - MVCC
- 一条 SQL 语句的执行过程
- 数据库基准测试、性能监控及调优、SQL 调优
- 分库分表
  - 发展历程（SQL 调优、加缓存、分库分表）
  - 分库分表
    - 问题及解决方案（全局唯一 id、聚合查询、数据迁移、分布式事务）

## 数据库设计与 SQL

> 01-SQL

1. 常用术语
2. 字符集和排序规则
3. 数据类型
   1. varchar() 和 char
   2. blog 和 text
   3. datetime 和 timestamp
   4. decimal 和 numeric
   5. json
4. 设计原则
   1. 三大范式
   2. 约束
5. 命令大小写
6. SQL
7. 函数
8. SQL 执行过程
9. 慢 SQL 日志
10. SQL 执行计划分析

## MySQL 架构与 InnoDB 存储引擎

> 02-架构与存储引擎

### 架构

- Server 层
- 可插拔式存储引擎层
- 磁盘文件层

### InnoDB 存储引擎

1. MySQL 中的线程
2. 内存结构
3. 磁盘结构
4. 数据存储

### 日志文件

binlog、redolog 和 undolog

## 索引

> 03-索引

1. 索引的优缺点（提高效率、增加了磁盘空间）
2. 维护索引的 SQL；
3. 索引分类
   1. 从功能上分类
   2. 从数据结构上分类（B+树索引、Hash 索引）
   3. 从数据存放位置上分类（聚簇索引、非聚簇索引）
   4. InnoDB 对索引的优化（索引下推、覆盖索引、自适应式 Hash 索引）
4. 高效使用索引
   1. 哪些情况适合创建索引（区分度很高、经常查询的列、不会出现函数计算的列）
   2. 哪些情况不适合创建索引（区分度不高、频繁更新）
5. 索引失效的场景
6. 基于索引对千万级表进行查询优化

## 隔离级别的实现

> 04-隔离级别的实现

1. 锁的分类
   1. 元数据锁
   2. 数据锁
2. 并发一致性问题
3. 事务与隔离级别
4. 隔离级别的实现
   1. 有锁方案
   2. 无锁方案

## 高可用和高性能

> 05-高可用与高性能

### 主从

1. 搭建过程
2. 原理
3. 问题及解决

// TODO

1. haproxy 的使用
2. keepalive 的使用
3. mycat 的使用
4. shardingshphere 的使用
5. GTID 全局事务 id 的介绍与实战

### 分库分表

1. 分法（垂直分、水平分、分库、分表）
2. 分片策略（按 IP、按范围、特定算法（如，hash））
3. 分库分表衍生问题
   1. 分布式事务
   2. 全局 ID
   3. 跨界点聚合查询
   4. 数据迁移和扩容

## 实战

> 99-实战

### 安装

1. centos7 上安装 MySQL8
2. centos7 上安装 MySQL5.7
3. centos7 上安装 MySQL5.7 一主一从
4. docker 上安装 MySQL5.7
5. docker 上安装 MySQL5.7 一主二从

### 基准测试

mysqlbenchmark

### 监控与告警

mysql8+mysql-exporter+Prometheus+Granfana

### 实验
