import{_ as r,W as d,X as v,Y as i,Z as n,$ as a,a0 as l,C as t}from"./framework-16b96b76.js";const c="/assets/1680448811163-640e4d08.png",o="/assets/1680448938831-876403eb.png",m="/assets/1680439140349-5d728161.png",u="/assets/1680439220617-8bf8edc7.png",b="/assets/1680439460507-db4b32e5.png",h="/assets/1680441120803-df285ea0.png",p="/assets/1680441169809-512638a6.png",s="/assets/1680441284422-f8d7c850.png",g="/assets/1680441340180-6b396847.png",j="/assets/1680441663228-84ac742b.png",E={},S=l('<h1 id="_9-工具包" tabindex="-1"><a class="header-anchor" href="#_9-工具包" aria-hidden="true">#</a> 9. 工具包</h1><h3 id="_1-jvm自带工具" tabindex="-1"><a class="header-anchor" href="#_1-jvm自带工具" aria-hidden="true">#</a> 1. JVM自带工具</h3><h4 id="_1-1-jps" tabindex="-1"><a class="header-anchor" href="#_1-1-jps" aria-hidden="true">#</a> 1.1. jps</h4><h4 id="_1-2-jstack" tabindex="-1"><a class="header-anchor" href="#_1-2-jstack" aria-hidden="true">#</a> 1.2. jstack</h4><h4 id="_1-3-jmap" tabindex="-1"><a class="header-anchor" href="#_1-3-jmap" aria-hidden="true">#</a> 1.3. jmap</h4><h4 id="_1-4-jcmd" tabindex="-1"><a class="header-anchor" href="#_1-4-jcmd" aria-hidden="true">#</a> 1.4. jcmd</h4><h4 id="_1-5-jinfo" tabindex="-1"><a class="header-anchor" href="#_1-5-jinfo" aria-hidden="true">#</a> 1.5. jinfo</h4><h4 id="_1-6-jprofiler" tabindex="-1"><a class="header-anchor" href="#_1-6-jprofiler" aria-hidden="true">#</a> 1.6. jprofiler</h4><h4 id="_1-7-jvisualvm" tabindex="-1"><a class="header-anchor" href="#_1-7-jvisualvm" aria-hidden="true">#</a> 1.7. jvisualvm</h4><p>jcmd jmap jinfo pid // jstack pid // 查看当前jvm有哪些进程，初步排查线程健康状况，如果多数线程处于等待状态，很可能就有问题了 jstat -gc pid // GC回收情况 jps -l</p><figure><img src="'+c+'" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p><img src="'+o+'" alt="image.png" loading="lazy"> ./ch09-tools/image/1680448811163.png</p><ol><li>把堆内存dump下载./ch09-tools/image/1680448938831.png jps //查看pid jmap -dump:format=b,file=heap.1 pid //不进行垃圾回收直接dump jmap -dump:live,format=b,file=heap.2 pid //进行fgc垃圾回收在进行dump jmap -histo:live pid //进行fgc垃圾回收在进行dump</li><li>使用java VisualVM(lib目录下jdk8自带)导入dump文件</li></ol><h3 id="_2-第三方工具" tabindex="-1"><a class="header-anchor" href="#_2-第三方工具" aria-hidden="true">#</a> 2. 第三方工具</h3>',14),C={href:"https://arthas.aliyun.com/",target:"_blank",rel:"noopener noreferrer"},A={href:"https://github.com/alibaba/arthas/issues/1892",target:"_blank",rel:"noopener noreferrer"},O={href:"https://blog.openresty.com.cn/cn/dynamic-tracing/",target:"_blank",rel:"noopener noreferrer"},M={href:"https://github.com/alibaba/arthas/issues/1202",target:"_blank",rel:"noopener noreferrer"},f={href:"https://blog.csdn.net/qq_43692950/article/details/122688520",target:"_blank",rel:"noopener noreferrer"},T={href:"https://blog.csdn.net/qq_14996421/article/details/115982546",target:"_blank",rel:"noopener noreferrer"},_=l('<h3 id="_3-安装" tabindex="-1"><a class="header-anchor" href="#_3-安装" aria-hidden="true">#</a> 3. 安装</h3><h3 id="_4-启动" tabindex="-1"><a class="header-anchor" href="#_4-启动" aria-hidden="true">#</a> 4. 启动</h3><p>java -jar arthas-boot.jar</p><h3 id="_5-常用命令" tabindex="-1"><a class="header-anchor" href="#_5-常用命令" aria-hidden="true">#</a> 5. 常用命令</h3><ol><li>dashboard</li><li>thread -b</li><li>jvm</li><li>heapdum /path/to/hproffile/my.hprof</li><li></li></ol><h3 id="_6-常用场景" tabindex="-1"><a class="header-anchor" href="#_6-常用场景" aria-hidden="true">#</a> 6. 常用场景</h3><ol><li>查看jvm参数</li><li>查看阻塞的线程</li><li>生成堆栈快照文件</li><li>查看仪表盘</li><li>查看类加载信息</li><li>在线更换.class文件</li><li>项目启动时，查看各个区域所使用的比例，来判断各个参数的配置应该是多少</li></ol><h3 id="_7-控制面板" tabindex="-1"><a class="header-anchor" href="#_7-控制面板" aria-hidden="true">#</a> 7. 控制面板</h3><p>发送请求，发现 『ps_old_gen』 区域的使用容量越来越大，如下面两张图，<strong>这说明有很多大对象进入了老年代。</strong></p><figure><img src="'+m+'" alt="图1" tabindex="0" loading="lazy"><figcaption>图1</figcaption></figure><p>./ch09-tools/image/1680439140349.png <img src="'+u+'" alt="图2" loading="lazy"></p><p>./ch09-tools/image/1680439220617.png</p><h3 id="_8-利用arthas生成dump文件" tabindex="-1"><a class="header-anchor" href="#_8-利用arthas生成dump文件" aria-hidden="true">#</a> 8. 利用Arthas生成dump文件</h3><figure><img src="'+b+'" alt="生成dump文件到指定目录" tabindex="0" loading="lazy"><figcaption>生成dump文件到指定目录</figcaption></figure><h3 id="_9-arthas的其他命-ch09-tools-image-1680439460507-png" tabindex="-1"><a class="header-anchor" href="#_9-arthas的其他命-ch09-tools-image-1680439460507-png" aria-hidden="true">#</a> 9. Arthas的其他命./ch09-tools/image/1680439460507.png</h3><ol><li>运行</li></ol><figure><img src="'+h+'" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><ol start="2"><li>选取一个应用进行链接 ./ch09-tools/image/1680441120803.png</li></ol><figure><img src="'+p+`" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><ol start="3"><li>查看仪表盘 ./ch09-tools/image/1680441169809.png</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[arthas@41713]$ dashboard

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+s+'" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><figure><img src="'+s+'" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><figure><img src="'+g+`" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[arthas@47132]$ jvm
 RUNTIME                                                                                                                                                                                                                                           
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 MACHINE-NAME                                                         47132@ShawndeMacBook-Pro.local                                                                                                                                               
 JVM-START-TIME                                                       2023-04-02 21:28:43                                                                                                                                                          
 MANAGEMENT-SPEC-VERSION                                              1.2                                                                                                                                                                          
 SPEC-NAME                                                            Java Virtual Machine Specification                                                                                                                                           
 SPEC-VENDOR                                                          Oracle Corporation                                                                                                                                                           
 SPEC-VERSION                                                         1.8                                                                                                                                                                          
 VM-NAME                                                              OpenJDK 64-Bit Server VM                                                                                                                                                     
 VM-VENDOR                                                            Azul Systems, Inc.                                                                                                                                                           
 VM-VERSION                                                           25.282-b08                                                                                                                                                                   
 INPUT-ARGUMENTS                                                      -Xms100m                                                                                                                                                                     
                                                                      -Xmx100m                                                                                                                                                                     
                                                                      -verbose:gc                                                                                                                                                                  
                                                                      -XX:+PrintGCDetails                                                                                                                                                          
                                                                      -XX:+PrintGCDateStamps                                                                                                                                                       
                                                                      -XX:+HeapDumpOnOutOfMemoryError                                                                                                                                              
                                                                      -XX:HeapDumpPath=/Users/shawnwang/Downloads/jvm-logs                                                                                                                         
                                                                      -XX:ErrorFile=/Users/shawnwang/Downloads/jvm-logs/java_err.log                                                                                                               
                                                                      -Xloggc:/Users/shawnwang/Downloads/jvm-logs/gc.log                                                                                                                           
 CLASS-PATH                                                           jvm-test-0.0.1-SNAPSHOT.jar                                                                                                                                                  
 BOOT-CLASS-PATH                                                      /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/Jav 
                                                                      aVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/sunrsasign.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachin 
                                                                      es/zulu-8.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Con 
                                                                      tents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/classes                                                                            
 LIBRARY-PATH                                                         /Users/shawnwang/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.                           
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 CLASS-LOADING                                                                                                                                                                                                                                     
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 LOADED-CLASS-COUNT                                                   8164                                                                                                                                                                         
 TOTAL-LOADED-CLASS-COUNT                                             8164                                                                                                                                                                         
 UNLOADED-CLASS-COUNT                                                 0                                                                                                                                                                            
 IS-VERBOSE                                                           false                                                                                                                                                                        
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 COMPILATION                                                                                                                                                                                                                                       
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 NAME                                                                 HotSpot 64-Bit Tiered Compilers                                                                                                                                              
 TOTAL-COMPILE-TIME                                                   3537                                                                                                                                                                         
 [time (ms)]                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 GARBAGE-COLLECTORS                                                                                                                                                                                                                                
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 PS Scavenge                                                          name : PS Scavenge                                                                                                                                                           
 [count/time (ms)]                                                    collectionCount : 16                                                                                                                                                         
                                                                      collectionTime : 36                                                                                                                                                          
 PS MarkSweep                                                         name : PS MarkSweep                                                                                                                                                          
 [count/time (ms)]                                                    collectionCount : 2                                                                                                                                                          
                                                                      collectionTime : 61                                                                                                                                                          
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 MEMORY-MANAGERS                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 CodeCacheManager                                                     Code Cache                                                                                                                                                                   
 Metaspace Manager                                                    Metaspace                                                                                                                                                                    
                                                                      Compressed Class Space                                                                                                                                                       
 PS Scavenge                                                          PS Eden Space                                                                                                                                                                
                                                                      PS Survivor Space                                                                                                                                                            
 PS MarkSweep                                                         PS Eden Space                                                                                                                                                                
                                                                      PS Survivor Space                                                                                                                                                            
                                                                      PS Old Gen                                                                                                                                                                   
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 MEMORY                                                                                                                                                                                                                                            
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 HEAP-MEMORY-USAGE                                                    init : 109051904(104.0 MiB)                                                                                                                                                  
 [memory in bytes]                                                    used : 33169048(31.6 MiB)                                                                                                                                                    
                                                                      committed : 95420416(91.0 MiB)                                                                                                                                               
                                                                      max : 96993280(92.5 MiB)                                                                                                                                                     
 NO-HEAP-MEMORY-USAGE                                                 init : 2555904(2.4 MiB)                                                                                                                                                      
 [memory in bytes]                                                    used : 59594664(56.8 MiB)                                                                                                                                                    
                                                                      committed : 63012864(60.1 MiB)                                                                                                                                               
                                                                      max : -1(-1 B)                                                                                                                                                               
 PENDING-FINALIZE-COUNT                                               0                                                                                                                                                                            
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 OPERATING-SYSTEM                                                                                                                                                                                                                                  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 OS                                                                   Mac OS X                                                                                                                                                                     
 ARCH                                                                 aarch64                                                                                                                                                                      
 PROCESSORS-COUNT                                                     8                                                                                                                                                                            
 LOAD-AVERAGE                                                         2.14892578125                                                                                                                                                                
 VERSION                                                              13.0.1                                                                                                                                                                       
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 THREAD                                                                                                                                                                                                                                            
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 COUNT                                                                30                                                                                                                                                                           
 DAEMON-COUNT                                                         26                                                                                                                                                                           
 PEAK-COUNT                                                           30                                                                                                                                                                           
 STARTED-COUNT                                                        35                                                                                                                                                                           
 DEADLOCK-COUNT                                                       0                                                                                                                                                                            
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 FILE-DESCRIPTOR                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 MAX-FILE-DESCRIPTOR-COUNT                                            10240                                                                                                                                                                        
 OPEN-FILE-DESCRIPTOR-COUNT                                           202                                                              

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>java -server -Xms100m -Xmx100m -verbose:gc -XX:+PrintGCDetails \\
-XX:+PrintGCDateStamps \\
-XX:+HeapDumpOnOutOfMemoryError \\
-XX:HeapDumpPath=/Users/shawnwang/Downloads/jvm-logs \\
-XX:ErrorFile=/Users/shawnwang/Downloads/jvm-logs/java_err.log \\
-XX:+UseG1GC -XX:SoftRefLRUPolicyMSPerMB=0 -XX:SurvivorRatio=8 \\
-Xloggc:/Users/shawnwang/Downloads/jvm-logs/gc.log \\
-jar jvm-test-0.0.1-SNAPSHOT.jar 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+j+`" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[arthas@46428]$ jvm
 RUNTIME                                                                                                                                                                                                                                           
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 MACHINE-NAME                                                         46428@ShawndeMacBook-Pro.local                                                                                                                                               
 JVM-START-TIME                                                       2023-04-02 21:19:08                                                                                                                                                          
 MANAGEMENT-SPEC-VERSION                                              1.2                                                                                                                                                                          
 SPEC-NAME                                                            Java Virtual Machine Specification                                                                                                                                           
 SPEC-VENDOR                                                          Oracle Corporation                                                                                                                                                           
 SPEC-VERSION                                                         1.8                                                                                                                                                                          
 VM-NAME                                                              OpenJDK 64-Bit Server VM                                                                                                                                                     
 VM-VENDOR                                                            Azul Systems, Inc.                                                                                                                                                           
 VM-VERSION                                                           25.282-b08                                                                                                                                                                   
 INPUT-ARGUMENTS                                                      -Xms100m                                                                                                                                                                     
                                                                      -Xmx100m                                                                                                                                                                     
                                                                      -verbose:gc                                                                                                                                                                  
                                                                      -XX:+PrintGCDetails                                                                                                                                                          
                                                                      -XX:+PrintGCDateStamps                                                                                                                                                       
                                                                      -XX:+HeapDumpOnOutOfMemoryError                                                                                                                                              
                                                                      -XX:HeapDumpPath=/Users/shawnwang/Downloads/jvm-logs                                                                                                                         
                                                                      -XX:ErrorFile=/Users/shawnwang/Downloads/jvm-logs/java_err.log                                                                                                               
                                                                      -XX:+UseG1GC                                                                                                                                                                 
                                                                      -XX:SoftRefLRUPolicyMSPerMB=0                                                                                                                                                
                                                                      -XX:SurvivorRatio=8                                                                                                                                                          
                                                                      -Xloggc:/Users/shawnwang/Downloads/jvm-logs/gc.log                                                                                                                           
 CLASS-PATH                                                           jvm-test-0.0.1-SNAPSHOT.jar                                                                                                                                                  
 BOOT-CLASS-PATH                                                      /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/Jav 
                                                                      aVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/sunrsasign.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachin 
                                                                      es/zulu-8.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Con 
                                                                      tents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/classes                                                                            
 LIBRARY-PATH                                                         /Users/shawnwang/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.                           
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 CLASS-LOADING                                                                                                                                                                                                                                     
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 LOADED-CLASS-COUNT                                                   8783                                                                                                                                                                         
 TOTAL-LOADED-CLASS-COUNT                                             8791                                                                                                                                                                         
 UNLOADED-CLASS-COUNT                                                 8                                                                                                                                                                            
 IS-VERBOSE                                                           false                                                                                                                                                                        
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 COMPILATION                                                                                                                                                                                                                                       
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 NAME                                                                 HotSpot 64-Bit Tiered Compilers                                                                                                                                              
 TOTAL-COMPILE-TIME                                                   5532                                                                                                                                                                         
 [time (ms)]                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 GARBAGE-COLLECTORS                                                                                                                                                                                                                                
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 G1 Young Generation                                                  name : G1 Young Generation                                                                                                                                                   
 [count/time (ms)]                                                    collectionCount : 8                                                                                                                                                          
                                                                      collectionTime : 50                                                                                                                                                          
 G1 Old Generation                                                    name : G1 Old Generation                                                                                                                                                     
 [count/time (ms)]                                                    collectionCount : 0                                                                                                                                                          
                                                                      collectionTime : 0                                                                                                                                                           
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 MEMORY-MANAGERS                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 CodeCacheManager                                                     Code Cache                                                                                                                                                                   
 Metaspace Manager                                                    Metaspace                                                                                                                                                                    
                                                                      Compressed Class Space                                                                                                                                                       
 G1 Young Generation                                                  G1 Eden Space                                                                                                                                                                
                                                                      G1 Survivor Space                                                                                                                                                            
                                                                      G1 Old Gen                                                                                                                                                                   
 G1 Old Generation                                                    G1 Eden Space                                                                                                                                                                
                                                                      G1 Survivor Space                                                                                                                                                            
                                                                      G1 Old Gen                                                                                                                                                                   
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 MEMORY                                                                                                                                                                                                                                            
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 HEAP-MEMORY-USAGE                                                    init : 109051904(104.0 MiB)                                                                                                                                                  
 [memory in bytes]                                                    used : 55500944(52.9 MiB)                                                                                                                                                    
                                                                      committed : 109051904(104.0 MiB)                                                                                                                                             
                                                                      max : 109051904(104.0 MiB)                                                                                                                                                   
 NO-HEAP-MEMORY-USAGE                                                 init : 2555904(2.4 MiB)                                                                                                                                                      
 [memory in bytes]                                                    used : 68178360(65.0 MiB)                                                                                                                                                    
                                                                      committed : 71303168(68.0 MiB)                                                                                                                                               
                                                                      max : -1(-1 B)                                                                                                                                                               
 PENDING-FINALIZE-COUNT                                               0                                                                                                                                                                            
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 OPERATING-SYSTEM                                                                                                                                                                                                                                  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 OS                                                                   Mac OS X                                                                                                                                                                     
 ARCH                                                                 aarch64                                                                                                                                                                      
 PROCESSORS-COUNT                                                     8                                                                                                                                                                            
 LOAD-AVERAGE                                                         1.33984375                                                                                                                                                                   
 VERSION                                                              13.0.1                                                                                                                                                                       
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 THREAD                                                                                                                                                                                                                                            
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 COUNT                                                                45                                                                                                                                                                           
 DAEMON-COUNT                                                         41                                                                                                                                                                           
 PEAK-COUNT                                                           46                                                                                                                                                                           
 STARTED-COUNT                                                        53                                                                                                                                                                           
 DEADLOCK-COUNT                                                       0                                                                                                                                                                            
                                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 FILE-DESCRIPTOR                                                                                                                                                                                                                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 MAX-FILE-DESCRIPTOR-COUNT                                            10240                                                                                                                                                                        
 OPEN-FILE-DESCRIPTOR-COUNT                                           202                 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ thread -b
&quot;http-bio-8080-exec-4&quot; Id=27 TIMED_WAITING
    at java.lang.Thread.sleep(Native Method)
    at test.arthas.TestThreadBlocking.doGet(TestThreadBlocking.java:22)
    -  locked java.lang.Object@725be470 &lt;---- but blocks 4 other threads!
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:624)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:731)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
    at test.filter.TestDurexFilter.doFilter(TestDurexFilter.java:46)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:505)
    at com.taobao.tomcat.valves.ContextLoadFilterValve$FilterChainAdapter.doFilter(ContextLoadFilterValve.java:191)
    at com.taobao.eagleeye.EagleEyeFilter.doFilter(EagleEyeFilter.java:81)
    at com.taobao.tomcat.valves.ContextLoadFilterValve.invoke(ContextLoadFilterValve.java:150)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:429)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1085)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:625)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:318)
    -  locked org.apache.tomcat.util.net.SocketWrapper@7127ee12
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)

    Number of locked synchronizers = 1
    - java.util.concurrent.ThreadPoolExecutor$Worker@31a6493e

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-arthas场景应用" tabindex="-1"><a class="header-anchor" href="#_10-arthas场景应用" aria-hidden="true">#</a> 10. Arthas场景应用</h3><ol><li>获取jvm启动时所设置的参数</li><li>监控thread的运行情况</li><li>监控内存的运行情况</li><li>生成dump文件</li><li>动态替换.class文件，达到不停机式投产</li></ol><h3 id="_11-常见案例" tabindex="-1"><a class="header-anchor" href="#_11-常见案例" aria-hidden="true">#</a> 11. 常见案例</h3>`,32);function N(x,P){const e=t("ExternalLinkIcon");return d(),v("div",null,[S,i("ul",null,[i("li",null,[i("a",C,[n("Arhtas"),a(e)])]),i("li",null,[i("a",A,[n("通过 Arthas Trace 命令将接口性能优化十倍（User Case 投稿）"),a(e)])]),i("li",null,[i("a",O,[n("动态追踪技术漫谈"),a(e)])]),i("li",null,[i("a",M,[n("利用Arthas精准定位Java应用CPU负载过高问题"),a(e)])]),i("li",null,[i("a",f,[n("阿里Java诊断工具 arthas - 排查线上环境内存使用过大、线程cpu使用率高问题"),a(e)])]),i("li",null,[i("a",T,[n("【死磕JVM】用Arthas排查JVM内存 真爽！我从小用到大"),a(e)])])]),_])}const R=r(E,[["render",N],["__file","ch09-tools.html.vue"]]);export{R as default};
